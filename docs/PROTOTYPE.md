# Прототип: Точка входа (СФЕРА)

## Концепция

Сфера — первое касание с миром сайта. Обучает без слов: **созидание требует паузы, не суеты**. Сфера живая, помнит, реагирует на состояние — не на клики.

---

## Визуал

| Параметр | Значение |
|----------|----------|
| Фон | Чёрный (#000000) |
| Частицы в норме | Грязно-фиолетовый (#2D1B4E → #1A0F2E) |
| Призрачные частицы | Чуть светлее (+15% яркости), едва заметное мерцание |
| Токсичный цвет | Лайм (#39FF14) |
| Сфера | 2.5D (плоская с иллюзией глубины) |
| Количество частиц | ~2000-5000 (из них 2-3% призрачные) |

---

## Поведение частиц

### Три режима

```
[ПОКОЙ]                    [ДВИЖЕНИЕ]                  [СУЕТА]
    │                          │                          │
    ↓                          ↓                          ↓
Сфера дышит              Частицы следуют           Сфера кровоточит
Пульсация ±5%            за курсором               Пиксели падают
Цикл 3-4 сек             с задержкой (lerp)        вниз экрана
(→ 6 сек при замирании)  Вязко, как дым            Токсичный лайм
```

### Дыхание сферы (адаптивное)

1. Базовый цикл: 3-4 сек
2. При замирании юзера > 5 сек → цикл плавно удлиняется до 6 сек
3. Эффект: сфера «синхронизируется» с предполагаемым дыханием
4. При движении → возврат к базовому ритму

### Следование за курсором

- Частицы реагируют с задержкой (lerp 0.03-0.05)
- Вязкость: ближние частицы реагируют быстрее, дальние — медленнее
- Ощущение: густой дым, нефть

### Механика «кровотечения»

1. Отслеживаем velocity курсора
2. Если velocity > порога N мс подряд → начинаем кровотечение
3. Частицы отрываются и падают вниз
4. Цвет падающих: лайм (#39FF14)
5. Накапливаются внизу экрана
6. При замирании:
   - Кровотечение останавливается
   - Накопленные частицы медленно растворяются

---

## Расширенные механики

### Лего-сборка при паузе

При длительном замирании (> 10 сек) частицы начинают группироваться в микро-структуры:
- Простые геометрические формы (треугольники, спирали)
- Чем дольше пауза — тем сложнее структура
- При движении — рассыпаются обратно
- **Смысл:** созидание = остановка, не суета

### Призрачные частицы (чужие следы)

- 2-3% частиц — «призраки» прошлых визитов
- Визуально: чуть светлее, едва заметное мерцание (opacity 0.3-0.5)
- Поведение: следуют случайным/сохранённым траекториям
- При кровотечении падают вместе, но растворяются медленнее
- **Смысл:** ты не один, здесь были другие

### Шрамы от суеты

- При долгом кровотечении (> 5 сек) часть частиц «травмируется»
- Травмированные частицы не возвращаются на точное место
- Сфера становится слегка асимметричной
- Деформация сохраняется до перехода к манифесту
- **Смысл:** след остаётся, нельзя откатить полностью

---

## Звуковой слой

| Состояние | Звук |
|-----------|------|
| **Покой** | Sub-bass гул (30-50 Hz), едва слышный — дыхание мира |
| **Движение** | Микро-шорохи, следуют за частицами |
| **Суета** | High-pitched звон (не громкий, но неприятный) |
| **Замирание после суеты** | Звон затухает → тишина как награда |

**Технически:** Web Audio API, осцилляторы, lowpass/highpass filter automation

---

## Переход к манифесту

- **Условие:** юзер замер на N секунд (предложение: 8-10 сек)
- **Действие:** появляется фраза-манифест
- **Фраза:** «Исправление — это ложь. Правда была в ошибке.»
- **Расположение:** центр, поверх сферы (fade in)
- После клика или ещё N секунд: переход к комнате 1 (КЛЯП)

---

## Технический стек

| Компонент | Технология |
|-----------|------------|
| Рендеринг | Three.js |
| Частицы | Points + BufferGeometry |
| Расчёт позиций | GPGPU (шейдеры) или CPU (для MVP) |
| Взаимодействие | Raycaster / mouse position uniform |
| Звук | Web Audio API |
| Сборка | Vite |

---

## Файловая структура

```
/prototype-sphere/
├── index.html
├── style.css
├── main.js              # Инициализация Three.js + Audio
├── Sphere.js            # Класс сферы
├── ParticleSystem.js    # Логика частиц (обычные + призрачные)
├── AudioManager.js      # Звуковой слой
├── shaders/
│   ├── vertex.glsl
│   └── fragment.glsl
└── package.json
```

---

## Этапы разработки

### Этап 1: Базовая сфера (MVP)
- [ ] Чёрный экран + Vite setup
- [ ] Сфера из частиц в центре
- [ ] Базовая пульсация (дыхание 3-4 сек)

### Этап 2: Реакция на мышь
- [ ] Частицы следуют за курсором с задержкой (lerp)
- [ ] Вязкость движения (ближние быстрее, дальние медленнее)

### Этап 3: Кровотечение
- [ ] Отслеживание velocity
- [ ] Отрыв частиц при суете
- [ ] Падение + токсичный цвет
- [ ] Накопление внизу

### Этап 4: Исцеление + шрамы
- [ ] Остановка кровотечения при замирании
- [ ] Растворение накопленных частиц
- [ ] Сохранение «шрамов» (offset для травмированных частиц)

### Этап 5: Адаптивное дыхание
- [ ] Удлинение цикла при длительной паузе
- [ ] Плавный переход между ритмами

### Этап 6: Лего-сборка
- [ ] Геометрические аттракторы при паузе > 10 сек
- [ ] Усложнение структуры со временем
- [ ] Рассыпание при движении

### Этап 7: Призрачные частицы
- [ ] 2-3% частиц с особым визуалом
- [ ] Случайные/сохранённые траектории
- [ ] Медленное растворение после падения

### Этап 8: Звуковой слой
- [ ] Sub-bass гул в покое
- [ ] Шорохи при движении
- [ ] Звон при суете
- [ ] Затухание как награда

### Этап 9: Переход
- [ ] Появление фразы-манифеста
- [ ] Fade in текста
- [ ] Переход к комнате 1 (КЛЯП)

---

## Приоритет этапов

| Приоритет | Этапы | Суть |
|-----------|-------|------|
| **P0 (ядро)** | 1-4 | Базовая механика: дыхание, движение, кровотечение |
| **P1 (углубление)** | 5-6 | Адаптивность, Лего-сборка |
| **P2 (атмосфера)** | 7-8 | Призраки, звук |
| **P3 (связка)** | 9 | Переход к следующей сцене |

---

## Открытые вопросы (решены / в работе)

- [x] Звук? → Да, три слоя (гул, шорохи, звон)
- [ ] Сколько секунд замирания до манифеста? (предложение: 8-10)
- [ ] Как выглядит переход к комнате 1?
- [ ] Хранить ли призрачные траектории реально или генерировать?

---

*Обновлено: 7 января 2026*
*Добавлены: адаптивное дыхание, Лего-сборка, призраки, шрамы, звуковой слой*
